{"ast":null,"code":"var _jsxFileName = \"/media/htet/13d0eda8-9d9f-4341-9c22-cd0d2676df10/PADC Project/PADC7-FP-BloodSharing-Web/blood-sharing/src/components/container/BloodRequest/BloodRequest.js\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Link, Redirect } from \"react-router-dom\";\nimport { Container, Row, Col, Navbar, Nav, NavDropdown, NavItem, Form, Carousel, Image, Card, Button, p, TabPane, TabContent } from 'react-bootstrap';\nimport bld_logo from '../../../assets/images/icons/bld_logo.png';\nimport firebase from '../../../utilites/firebase';\nimport { connect } from 'react-redux';\nimport { fetchUsers } from '../../../actions/userActions';\nimport { fetchDonors } from '../../../actions/donorActions';\nimport { timeStampToDate } from '../../../utilites/timeStampToDate';\n\nclass BloodRequest extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOnClick = event => {\n      event.preventDefault();\n      const request_id = event.target.value;\n      const user_id = this.props.currentUser.uid;\n      const users = this.props.users;\n      const user = users.find(item => item.id == user_id);\n      const userData = {\n        bloodType: user.bloodType,\n        phone: user.phone,\n        uid: user.uid,\n        name: user.name // Insert donor to request_user\n\n      };\n      firebase.firestore().collection('Request_User').doc(request_id).collection('Donor').doc(user_id).set(userData).then(data => {\n        console.log(\"success\");\n      }).catch(error => {\n        console.log(error);\n      });\n      const donorList = this.props.donors;\n      const donor = donorList.find(item => item.uid == user_id);\n      const donor_id = donor.id;\n      const requestUser = this.props.bloodRequest;\n      const requestData = {\n        bloodType: requestUser.bloodType,\n        phone: requestUser.phone,\n        uid: requestUser.uid,\n        name: requestUser.username // Insert request to donor\n\n      };\n      firebase.firestore().collection('Donor').doc(donor_id).collection('Request_User').doc(requestUser.uid).set(requestData).then(data => {\n        console.log(\"success\");\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.props.fetchUsers();\n    this.props.fetchDonors();\n  }\n\n  render() {\n    const uid = this.props.currentUser;\n    const users = this.props.users;\n    const user = users.find(item => item.id == uid);\n    const donorList = this.props.donors;\n    const donor = donorList.find(item => item.uid == uid);\n    const time = timeStampToDate(this.props.bloodRequest.requestedDate);\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 6,\n      md: 4,\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cardbody fixpage mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box card-color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-title text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, this.props.bloodRequest.bloodType), React.createElement(\"div\", {\n      className: \"middle-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"card-img text-center pt-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://img.icons8.com/metro/52/000000/ambulance.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"botton-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"botton-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cardname text-center mt-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.props.bloodRequest.username)), React.createElement(Row, {\n      className: \"cardinfo pl-3 pr-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 4,\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Blood bag\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"4\"))), React.createElement(Col, {\n      md: 5,\n      className: \"text-center pr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"location\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.props.bloodRequest.location))), React.createElement(Col, {\n      md: 3,\n      className: \"pr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Case\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.props.bloodRequest.reason)))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"text-right pr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, time.month, \" / \", time.day, \" / \", time.year, \" \", time.hour, \" : \", time.minute))))), donor != null && user.bloodType === this.props.bloodRequest.bloodType && React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"btn_donate\",\n      onClick: this.handleOnClick,\n      value: this.props.bloodRequest.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Donate\"))))))));\n  }\n\n}\n\n{\n  /* </Row>   */\n}\n{\n  /* end of cardbody fixpage */\n}\n{\n  /* </Container>\n  </div> */\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.currentUser,\n  users: state.users,\n  donors: state.donors\n});\n\nconst mapDispatchToProps = {\n  fetchUsers,\n  fetchDonors\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(BloodRequest);","map":{"version":3,"sources":["/media/htet/13d0eda8-9d9f-4341-9c22-cd0d2676df10/PADC Project/PADC7-FP-BloodSharing-Web/blood-sharing/src/components/container/BloodRequest/BloodRequest.js"],"names":["React","BrowserRouter","Router","Route","Link","Redirect","Container","Row","Col","Navbar","Nav","NavDropdown","NavItem","Form","Carousel","Image","Card","Button","p","TabPane","TabContent","bld_logo","firebase","connect","fetchUsers","fetchDonors","timeStampToDate","BloodRequest","Component","constructor","props","handleOnClick","event","preventDefault","request_id","target","value","user_id","currentUser","uid","users","user","find","item","id","userData","bloodType","phone","name","firestore","collection","doc","set","then","data","console","log","catch","error","donorList","donors","donor","donor_id","requestUser","bloodRequest","requestData","username","render","time","requestedDate","location","reason","month","day","year","hour","minute","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport { BrowserRouter as Router,Route,Link,Redirect} from \"react-router-dom\";\nimport { Container, Row, Col, Navbar, Nav, NavDropdown, NavItem, Form, Carousel, Image, Card, Button, p, TabPane, TabContent } from 'react-bootstrap';\nimport bld_logo from '../../../assets/images/icons/bld_logo.png';\nimport firebase from '../../../utilites/firebase';\nimport { connect } from 'react-redux';\nimport { fetchUsers } from '../../../actions/userActions';\nimport { fetchDonors } from '../../../actions/donorActions';\nimport { timeStampToDate } from '../../../utilites/timeStampToDate';\n\nclass BloodRequest extends React.Component {\n\n    constructor(props) {\n        super(props); \n        this.props.fetchUsers();\n        this.props.fetchDonors();\n    }\n\n    handleOnClick = (event) => {\n        event.preventDefault();\n        const request_id = event.target.value;\n        const user_id = this.props.currentUser.uid;\n        const users = this.props.users;\n        const user = users.find( item => item.id == user_id);\n        const userData = {\n            bloodType: user.bloodType,\n            phone: user.phone,\n            uid: user.uid,\n            name: user.name\n        }   \n        // Insert donor to request_user\n        firebase.firestore().collection('Request_User').doc(request_id).collection('Donor').doc(user_id).set(userData)\n        .then( data => {\n            console.log(\"success\")\n        })\n        .catch( error => {\n            console.log(error)\n        })  \n\n        const donorList = this.props.donors;\n        const donor = donorList.find( item => item.uid == user_id);\n        const donor_id = donor.id;\n        const requestUser = this.props.bloodRequest;\n        const requestData = {\n            bloodType: requestUser.bloodType,\n            phone: requestUser.phone,\n            uid: requestUser.uid,\n            name: requestUser.username\n        }\n        // Insert request to donor\n        firebase.firestore().collection('Donor').doc(donor_id).collection('Request_User').doc(requestUser.uid).set(requestData)\n        .then( data => {\n            console.log(\"success\")\n        })\n        .catch( error => {\n            console.log(error)\n        })\n\n    }\n\n  render() {\n    const uid = this.props.currentUser;\n    const users = this.props.users;\n    const user = users.find( item => item.id == uid);\n    const donorList = this.props.donors;\n    const donor = donorList.find( item => item.uid == uid);\n    const time = timeStampToDate(this.props.bloodRequest.requestedDate);\n    \n    return (\n      <React.Fragment>\n        <Col sm={6} md={4} lg= {3}>\n            <div className=\"cardbody fixpage mt-3\">\n                  \n          \n                      <div className='box card-color'>\n                          <div className=\"card-body\">\n                              <div className=\"d-flex\">\n                                  <div className=\"card-title text-center\">{this.props.bloodRequest.bloodType}</div>\n                                  <div className=\"middle-line\"></div>\n                                  <div className=\"card-img text-center pt-1\"><img src=\"https://img.icons8.com/metro/52/000000/ambulance.png\"/></div>\n                              </div>\n                              \n                              <div className=\"d-flex\">\n                                  <div className=\"botton-line\"></div>\n                                  <div className=\"botton-line\"></div>\n                              </div>\n                              \n                              <div className=\"card-content\">\n                                  <div className=\"cardname text-center mt-1\"><label>{this.props.bloodRequest.username}</label></div>\n                                  <Row className=\"cardinfo pl-3 pr-3\">\n                                      <Col md={4} className=\"\">\n                                          <div>\n                                              <label><i>Blood bag</i></label>\n                                          </div>\n                                          <div><label>4</label></div>\n                                      </Col>\n                                      <Col md={5} className=\"text-center pr-4\">\n                                          <div>\n                                              <label><i>location</i></label>\n                                          </div>\n                                          <div><label>{this.props.bloodRequest.location}</label></div>\n                                      </Col>\n                                      <Col md={3} className=\"pr-2\">\n                                          <div>\n                                              <label><i>Case</i></label>\n                                          </div>\n                                          <div><label>{this.props.bloodRequest.reason}</label></div>\n                                      </Col>\n                                  </Row>\n                                  <Row>\n                                      <Col  className=\"text-right pr-4\">\n                                          <label><span>{time.month} / {time.day} / {time.year} {time.hour} : {time.minute}</span></label>\n                                      </Col>\n                                  </Row>\n                              </div>\n                              {donor != null && user.bloodType === this.props.bloodRequest.bloodType && (   \n                              <Row>\n                                  <Col className=\"text-center\"><Button className=\"btn_donate\" onClick={this.handleOnClick} value={this.props.bloodRequest.id}>Donate</Button></Col>\n                              </Row>\n                              )}                                        \n                          </div>\n                      </div>\n                \n            </div>\n            </Col>\n      </React.Fragment>\n    );\n  }\n}\n {/* </Row>   */}\n        {/* end of cardbody fixpage */}\n        {/* </Container>\n        </div> */}\n\n\n\nconst mapStateToProps = state => ({\n    currentUser : state.currentUser,\n    users : state.users,\n    donors : state.donors,\n  });\nconst mapDispatchToProps = {\n    fetchUsers,\n    fetchDonors,\n  }\n  export default connect(mapStateToProps, mapDispatchToProps)(BloodRequest);"]},"metadata":{},"sourceType":"module"}